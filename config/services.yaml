parameters:
    locale: 'en'

services:
  _defaults:
    autowire: true
    autoconfigure: true

  # ┌─────────────────────────┐
  # │ Application services    │
  # └─────────────────────────┘
  Core\Application\Exchange\ExchangeDtoAssembler: ~
  Core\Application\Order\OrderDtoAssembler: ~


  # ┌─────────────────────────┐
  # │ Domain services         │
  # └─────────────────────────┘
  Core\Domain\Exchange\ExchangeRepository: '@Core\Infrastructure\Persistence\Repository\DoctrineExchangeRepository'
  Core\Domain\Order\OrderRepository: '@Core\Infrastructure\Persistence\Repository\DoctrineOrderRepository'


  # ┌─────────────────────────┐
  # │ Infrastructure services │
  # └─────────────────────────┘
  Core\Infrastructure\Persistence\Repository\:
    resource: '../src/Core/Infrastructure/Persistence/Repository'

  Core\Infrastructure\EventListener\ExceptionListener:
    tags: [{ name: kernel.event_listener, event: kernel.exception }]


  # ┌─────────────────────────┐
  # │ UI services             │
  # └─────────────────────────┘
  Core\Ui\Http\:
    resource: '../src/Core/Ui/Http'
    tags: ['controller.service_arguments']

  Core\Ui\Http\Controller:
    abstract: true
    arguments:
      $queryBus: '@tactician.commandbus.query'
      $commandBus: '@tactician.commandbus.command'
